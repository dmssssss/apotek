<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport"content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/>
    <title>HOSTERWEB - CV. Rizky Jaya Indosoft | Manajemen Apotek v1.0</title>
    <link rel="stylesheet" href="../bootstrap/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"/>
    
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="../dist/css/AdminLTE.min.css" />
    <link rel="stylesheet" href="../dist/css/skins/_all-skins.min.css" />
    <link rel="stylesheet" href="../plugins/iCheck/flat/blue.css" />
    <link rel="stylesheet" href="../plugins/morris/morris.css" />
    <link rel="stylesheet" href="../plugins/jvectormap/jquery-jvectormap-1.2.2.css"/>
    <link rel="stylesheet" href="../plugins/datepicker/datepicker3.css" />
    <link rel="stylesheet"href="../plugins/daterangepicker/daterangepicker-bs3.css"/>
    <link rel="stylesheet" href="../plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.min.css"/>
    <link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
  </head>

  <body class="hold-transition skin-blue sidebar-mini">
    <div class="wrapper">
      <header class="main-header">
        <a href ="dashboard_admin.html" class="logo">          
          <span class="logo-mini"><i class="fa fa-circle-plus"></i></span>
          <span class="logo-lg"><i class="fa fa-circle-plus"></i> Apotek</span>
        </a>
        <nav class="navbar navbar-static-top" role="navigation">
          <a
            href="#"
            class="sidebar-toggle"
            data-toggle="offcanvas"
            role="button"
          >
            <span class="sr-only">Toggle navigation</span>
          </a>
          
          <div class="navbar-custom-menu">
             <ul class="nav navbar-nav">
              <li >
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                  <i class="fa fa-user"></i> User : Admin</a>
                </a>
              </li>
              <li>
                <a href="../login_admin.html" > <i class="fa fa-sign-out"></i>Keluar</a>
            </li>
        </ul>
      </div>

        </nav>
      </header>

      <aside class="main-sidebar">
        <section class="sidebar">
          <ul class="sidebar-menu">           
            <li>
              <a href="dashboard_admin.html">
                <i class="fa fa-house"></i> <span> Dashboard</span>
              </a>
            </li>
            <li>
              <a href="data_pasien.html">
                <i class="fa fa-hospital-user"></i> <span> Data Pasien</span>
              </a>
            </li>
            <li>
              <a href="data_obat.html">
                <i class="fa fa-pills"></i> <span> Data Obat</span>
              </a>
            </li>
            <li>
              <a href="layanan_khusus.html">
                <i class="fa fa-hands-helping"></i> <span> Layanan Khusus </span>
              </a>
            </li>
            <li>
              <a href="laporan.html">
                <i class="fa fa-file-alt "></i> <span> Laporan</span>
              </a>
            </li>                     
          </ul>
        </section>
      </aside>

      <!-- Konten Dashboard -->
       <div class="content-wrapper">        
        <!-- Main content -->
        <!-- Content Header (Page header) -->
<section class="content-header">
  <h1>
    <i class="fa fa-stethoscope text-primary"></i> Layanan Khusus
    <small>Sistem Rekomendasi Personal & Manajemen Pasien</small>
  </h1>
  <ol class="breadcrumb">
    <li><a href="#"><i class="fa fa-dashboard"></i> Dashboard</a></li>
    <li><a href="#">Layanan Medis</a></li>
    <li class="active">Layanan Khusus</li>
  </ol>
</section>

<!-- Main content -->
<section class="content">
  
  <!-- Stats Cards -->
  <div class="row">
    <div class="col-lg-3 col-xs-6">
      <div class="small-box bg-aqua">
        <div class="inner">
          <h3 id="totalRekomendasi">142</h3>
          <p>Total Rekomendasi</p>
        </div>
        <div class="icon">
          <i class="fa fa-clipboard"></i>
        </div>
      </div>
    </div>
    <div class="col-lg-3 col-xs-6">
      <div class="small-box bg-green">
        <div class="inner">
          <h3 id="rekomendasisHariIni">23</h3>
          <p>Rekomendasi Hari Ini</p>
        </div>
        <div class="icon">
          <i class="fa fa-calendar-check-o"></i>
        </div>
      </div>
    </div>
    <div class="col-lg-3 col-xs-6">
      <div class="small-box bg-yellow">
        <div class="inner">
          <h3 id="menungguFollowup">8</h3>
          <p>Menunggu Follow-up</p>
        </div>
        <div class="icon">
          <i class="fa fa-clock-o"></i>
        </div>
      </div>
    </div>
    <div class="col-lg-3 col-xs-6">
      <div class="small-box bg-red">
        <div class="inner">
          <h3 id="prioritasTinggi">3</h3>
          <p>Prioritas Tinggi</p>
        </div>
        <div class="icon">
          <i class="fa fa-exclamation-triangle"></i>
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <!-- Service Overview -->
    <div class="col-md-4">
      <div class="box box-primary">
        <div class="box-header with-border text-center">
          <h3 class="box-title"><i class="fa fa-user-md"></i> Layanan Konsultasi Khusus</h3>
        </div>
        <div class="box-body text-center">
          <div style="padding: 20px 0;">
            <i class="fa fa-stethoscope" style="font-size: 64px; color: #3c8dbc; margin-bottom: 20px;"></i>
            <p style="font-size: 16px; line-height: 1.6;">
              Sistem konsultasi medis terintegrasi dengan AI-powered recommendation engine
            </p>
          </div>
          <button class="btn btn-primary btn-lg btn-block" onclick="startFlow()" style="margin-bottom: 10px;">
            <i class="fa fa-play-circle"></i> Mulai Layanan Baru
          </button>
          <button class="btn btn-default btn-block" onclick="showHistory()">
            <i class="fa fa-history"></i> Lihat Riwayat
          </button>
        </div>
      </div>

      <!-- Quick Actions -->
      <div class="box box-info">
        <div class="box-header with-border">
          <h3 class="box-title"><i class="fa fa-flash"></i> Quick Actions</h3>
        </div>
        <div class="box-body">
          <div class="list-group">
            <a href="#" class="list-group-item" onclick="quickTemplate('diabetes')">
              <i class="fa fa-heartbeat text-red"></i> Template Diabetes
            </a>
            <a href="#" class="list-group-item" onclick="quickTemplate('hipertensi')">
              <i class="fa fa-tint text-blue"></i> Template Hipertensi
            </a>
            <a href="#" class="list-group-item" onclick="quickTemplate('jantung')">
              <i class="fa fa-heart text-red"></i> Template Jantung
            </a>
            <a href="#" class="list-group-item" onclick="quickEmergency()">
              <i class="fa fa-ambulance text-orange"></i> Konsultasi Darurat
            </a>
          </div>
        </div>
      </div>
    </div>

    <!-- Main Flow Process -->
    <div class="col-md-8">
      <div class="box box-solid">
        <div class="box-header with-border">
          <h3 class="box-title"><i class="fa fa-sitemap"></i> Alur Layanan Khusus</h3>
          <div class="box-tools pull-right">
            <span class="label label-info" id="currentStep">Siap Memulai</span>
          </div>
        </div>
        <div class="box-body">
          
          <!-- Progress Bar -->
          <div class="progress progress-sm" style="margin-bottom: 20px;">
            <div class="progress-bar progress-bar-primary progress-bar-striped" id="progressBar" style="width: 0%"></div>
          </div>
          
          <!-- Initial State -->
          <div id="initialState">
            <div class="callout callout-info">
              <h4><i class="fa fa-info-circle"></i> Informasi Layanan</h4>
              <p>Layanan khusus memungkinkan Anda untuk:</p>
              <ul>
                <li>Membuat rekomendasi personal berdasarkan kondisi pasien</li>
                <li>Menggunakan template yang telah tersedia</li>
                <li>Mengirim rekomendasi melalui berbagai metode</li>
                <li>Menjadwalkan follow-up otomatis</li>
                <li>Tracking dan monitoring hasil</li>
              </ul>
              <p><strong>Klik "Mulai Layanan Baru" untuk memulai proses</strong></p>
            </div>
          </div>

          <!-- Flow Process -->
          <div id="flowContainer" style="display: none;">
            
            <!-- Step 1: Patient Selection -->
            <div class="timeline" id="step1">
              <div class="time-label">
                <span class="bg-blue"><i class="fa fa-user"></i> Step 1: Pilih Pasien</span>
              </div>
              <div>
                <i class="fa fa-users bg-blue"></i>
                <div class="timeline-item">
                  <div class="timeline-header">
                    <strong>Pilih atau Tambah Data Pasien</strong>
                  </div>
                  <div class="timeline-body">
                    <div class="row">
                      <div class="col-md-8">
                        <div class="form-group">
                          <label>Cari Pasien (Nama/RM)</label>
                          <div class="input-group">
                            <input type="text" class="form-control" placeholder="Ketik nama atau nomor RM..." id="patientSearch">
                            <span class="input-group-btn">
                              <button class="btn btn-info" onclick="searchPatient()">
                                <i class="fa fa-search"></i>
                              </button>
                            </span>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-4">
                        <label>&nbsp;</label><br>
                        <button class="btn btn-success btn-block" onclick="addNewPatient()">
                          <i class="fa fa-plus"></i> Pasien Baru
                        </button>
                      </div>
                    </div>
                    
                    <!-- Patient Results -->
                    <div id="patientResults" style="display: none;">
                      <h5>Hasil Pencarian:</h5>
                      <div class="table-responsive">
                        <table class="table table-bordered table-hover">
                          <thead>
                            <tr>
                              <th>Nama</th>
                              <th>No. RM</th>
                              <th>Umur</th>
                              <th>Terakhir Konsultasi</th>
                              <th>Aksi</th>
                            </tr>
                          </thead>
                          <tbody id="patientTableBody">
                            <!-- Dynamic content -->
                          </tbody>
                        </table>
                      </div>
                    </div>
                    
                    <!-- Selected Patient Info -->
                    <div id="selectedPatient" style="display: none;">
                      <div class="callout callout-success">
                        <h4><i class="fa fa-user-circle"></i> Pasien Terpilih</h4>
                        <div class="row">
                          <div class="col-md-6">
                            <strong>Nama:</strong> <span id="selectedName">-</span><br>
                            <strong>No. RM:</strong> <span id="selectedRM">-</span><br>
                            <strong>Umur:</strong> <span id="selectedAge">-</span>
                          </div>
                          <div class="col-md-6">
                            <strong>Jenis Kelamin:</strong> <span id="selectedGender">-</span><br>
                            <strong>Alamat:</strong> <span id="selectedAddress">-</span><br>
                            <strong>Telepon:</strong> <span id="selectedPhone">-</span>
                          </div>
                        </div>
                        <div class="pull-right" style="margin-top: 10px;">
                          <button class="btn btn-primary" onclick="proceedToStep2()">
                            <i class="fa fa-arrow-right"></i> Lanjut ke Rekomendasi
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Step 2: Medical Assessment & Recommendation -->
            <div class="timeline" id="step2" style="display: none;">
              <div class="time-label">
                <span class="bg-yellow"><i class="fa fa-stethoscope"></i> Step 2: Assessment & Rekomendasi</span>
              </div>
              <div>
                <i class="fa fa-clipboard bg-yellow"></i>
                <div class="timeline-item">
                  <div class="timeline-header">
                    <strong>Pemeriksaan & Buat Rekomendasi Personal</strong>
                  </div>
                  <div class="timeline-body">
                    <form id="assessmentForm">
                      <div class="row">
                        <div class="col-md-6">
                          <div class="box box-info">
                            <div class="box-header">
                              <h4><i class="fa fa-heartbeat"></i> Vital Signs</h4>
                            </div>
                            <div class="box-body">
                              <div class="row">
                                <div class="col-md-6">
                                  <div class="form-group">
                                    <label>Tekanan Darah</label>
                                    <input type="text" class="form-control" placeholder="120/80 mmHg">
                                  </div>
                                </div>
                                <div class="col-md-6">
                                  <div class="form-group">
                                    <label>Nadi</label>
                                    <input type="text" class="form-control" placeholder="80 bpm">
                                  </div>
                                </div>
                              </div>
                              <div class="row">
                                <div class="col-md-6">
                                  <div class="form-group">
                                    <label>Suhu</label>
                                    <input type="text" class="form-control" placeholder="36.5°C">
                                  </div>
                                </div>
                                <div class="col-md-6">
                                  <div class="form-group">
                                    <label>Respirasi</label>
                                    <input type="text" class="form-control" placeholder="20/menit">
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="col-md-6">
                          <div class="box box-warning">
                            <div class="box-header">
                              <h4><i class="fa fa-comments"></i> Keluhan & Gejala</h4>
                            </div>
                            <div class="box-body">
                              <div class="form-group">
                                <label>Keluhan Utama</label>
                                <textarea class="form-control" rows="3" placeholder="Jelaskan keluhan utama pasien..."></textarea>
                              </div>
                              <div class="form-group">
                                <label>Riwayat Penyakit Sekarang</label>
                                <textarea class="form-control" rows="3" placeholder="Riwayat penyakit sekarang..."></textarea>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      
                      <div class="box box-success">
                        <div class="box-header">
                          <h4><i class="fa fa-user-md"></i> Diagnosis & Rekomendasi</h4>
                          <div class="box-tools pull-right">
                            <button type="button" class="btn btn-sm btn-primary" onclick="showTemplates()">
                              <i class="fa fa-book"></i> Template
                            </button>
                            <button type="button" class="btn btn-sm btn-info" onclick="aiAssistant()">
                              <i class="fa fa-magic"></i> AI Assistant
                            </button>
                          </div>
                        </div>
                        <div class="box-body">
                          <div class="row">
                            <div class="col-md-6">
                              <div class="form-group">
                                <label>Diagnosis Primer</label>
                                <input type="text" class="form-control" placeholder="Diagnosis utama...">
                              </div>
                              <div class="form-group">
                                <label>Diagnosis Sekunder</label>
                                <input type="text" class="form-control" placeholder="Diagnosis tambahan...">
                              </div>
                              <div class="form-group">
                                <label>Tingkat Prioritas</label>
                                <select class="form-control">
                                  <option value="normal">Normal</option>
                                  <option value="mendesak">Mendesak</option>
                                  <option value="sangat-mendesak">Sangat Mendesak</option>
                                  <option value="darurat">Darurat</option>
                                </select>
                              </div>
                            </div>
                            <div class="col-md-6">
                              <div class="form-group">
                                <label>Rekomendasi Pengobatan</label>
                                <textarea class="form-control" rows="4" placeholder="Detail rekomendasi pengobatan..."></textarea>
                              </div>
                              <div class="form-group">
                                <label>Lifestyle & Diet</label>
                                <textarea class="form-control" rows="2" placeholder="Rekomendasi gaya hidup dan diet..."></textarea>
                              </div>
                            </div>
                          </div>
                          
                          <div class="row">
                            <div class="col-md-4">
                              <div class="form-group">
                                <label>Follow-up Date</label>
                                <input type="date" class="form-control">
                              </div>
                            </div>
                            <div class="col-md-4">
                              <div class="form-group">
                                <label>Dokter Rujukan</label>
                                <select class="form-control">
                                  <option>Pilih dokter...</option>
                                  <option>Dr. Ahmad Spesialis Dalam</option>
                                  <option>Dr. Sari Spesialis Jantung</option>
                                  <option>Dr. Budi Spesialis Paru</option>
                                </select>
                              </div>
                            </div>
                            <div class="col-md-4">
                              <div class="form-group">
                                <label>Lab/Pemeriksaan</label>
                                <select class="form-control" multiple>
                                  <option>Darah Lengkap</option>
                                  <option>Gula Darah</option>
                                  <option>Kolesterol</option>
                                  <option>Rontgen Thorax</option>
                                  <option>EKG</option>
                                </select>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="box-footer">
                          <button type="button" class="btn btn-success btn-lg" onclick="saveAssessment()">
                            <i class="fa fa-save"></i> Simpan Rekomendasi
                          </button>
                          <button type="button" class="btn btn-default pull-right" onclick="previewRecommendation()">
                            <i class="fa fa-eye"></i> Preview
                          </button>
                        </div>
                      </div>
                    </form>
                  </div>
                </div>
              </div>
            </div>

            <!-- Step 3: Send to Patient -->
            <div class="timeline" id="step3" style="display: none;">
              <div class="time-label">
                <span class="bg-green"><i class="fa fa-send"></i> Step 3: Kirim ke Pasien</span>
              </div>
              <div>
                <i class="fa fa-paper-plane bg-green"></i>
                <div class="timeline-item">
                  <div class="timeline-header">
                    <strong>Pengiriman Rekomendasi & Follow-up</strong>
                  </div>
                  <div class="timeline-body">
                    <div class="row">
                      <div class="col-md-6">
                        <div class="box box-primary">
                          <div class="box-header">
                            <h4><i class="fa fa-share"></i> Metode Pengiriman</h4>
                          </div>
                          <div class="box-body">
                            <div class="form-group">
                              <label>Pilih Metode</label>
                              <select class="form-control" onchange="toggleDeliveryMethod(this)" id="deliveryMethod">
                                <option value="">Pilih metode...</option>
                                <option value="email">📧 Email</option>
                                <option value="whatsapp">💬 WhatsApp</option>
                                <option value="sms">📱 SMS</option>
                                <option value="print">🖨️ Print/Cetak</option>
                                <option value="portal">🌐 Patient Portal</option>
                              </select>
                            </div>
                            
                            <div id="contactDetails" style="display: none;">
                              <div class="form-group">
                                <label id="contactLabel">Kontak</label>
                                <div class="input-group">
                                  <input type="text" class="form-control" id="contactInput" placeholder="Masukkan kontak">
                                  <span class="input-group-btn">
                                    <button class="btn btn-info" onclick="validateContact()">
                                      <i class="fa fa-check"></i>
                                    </button>
                                  </span>
                                </div>
                              </div>
                            </div>

                            <div class="form-group">
                              <label>Template Pesan</label>
                              <select class="form-control" onchange="loadMessageTemplate(this)">
                                <option>Pilih template...</option>
                                <option value="formal">Formal</option>
                                <option value="friendly">Ramah</option>
                                <option value="urgent">Mendesak</option>
                              </select>
                            </div>
                            
                            <div class="form-group">
                              <label>Pesan Tambahan</label>
                              <textarea class="form-control" rows="4" id="additionalMessage" placeholder="Pesan tambahan untuk pasien..."></textarea>
                            </div>
                          </div>
                        </div>
                      </div>
                      
                      <div class="col-md-6">
                        <div class="box box-info">
                          <div class="box-header">
                            <h4><i class="fa fa-cogs"></i> Pengaturan Tambahan</h4>
                          </div>
                          <div class="box-body">
                            <div class="form-group">
                              <div class="checkbox">
                                <label>
                                  <input type="checkbox" checked> Kirim salinan ke rekam medis elektronik
                                </label>
                              </div>
                              <div class="checkbox">
                                <label>
                                  <input type="checkbox"> Jadwalkan follow-up otomatis
                                </label>
                              </div>
                              <div class="checkbox">
                                <label>
                                  <input type="checkbox"> Kirim reminder sebelum follow-up
                                </label>
                              </div>
                              <div class="checkbox">
                                <label>
                                  <input type="checkbox"> CC ke keluarga (jika ada)
                                </label>
                              </div>
                            </div>
                            
                            <div class="form-group">
                              <label>Priority Pengiriman</label>
                              <select class="form-control">
                                <option>Normal</option>
                                <option>High Priority</option>
                                <option>Urgent</option>
                              </select>
                            </div>
                            
                            <div class="form-group">
                              <label>Jadwal Pengiriman</label>
                              <div class="radio">
                                <label>
                                  <input type="radio" name="schedule" value="now" checked> Kirim sekarang
                                </label>
                              </div>
                              <div class="radio">
                                <label>
                                  <input type="radio" name="schedule" value="later"> Jadwalkan nanti
                                </label>
                              </div>
                              <input type="datetime-local" class="form-control" style="margin-top: 10px; display: none;" id="scheduleTime">
                            </div>
                          </div>
                          
                          <div class="box-footer">
                            <button type="button" class="btn btn-success btn-lg btn-block" onclick="sendRecommendation()">
                              <i class="fa fa-rocket"></i> Kirim Rekomendasi
                            </button>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- End Timeline -->
            <div class="timeline" id="timelineEnd" style="display: none;">
              <div class="time-label">
                <span class="bg-gray"><i class="fa fa-clock-o"></i> Selesai</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Success Modal -->
  <div class="modal modal-success fade" id="successModal">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span></button>
          <h4 class="modal-title"><i class="fa fa-check-circle"></i> Berhasil!</h4>
        </div>
        <div class="modal-body">
          <div class="text-center">
            <i class="fa fa-check-circle" style="font-size: 64px; color: #00a65a; margin-bottom: 20px;"></i>
            <h3>Rekomendasi Berhasil Dikirim!</h3>
            <p id="successMessage">Rekomendasi telah dikirim ke pasien dan tersimpan dalam sistem.</p>
            <div class="alert alert-info">
              <strong>Reference ID:</strong> <span id="referenceId">REC-2024-001</span>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-success" onclick="printReceipt()">
            <i class="fa fa-print"></i> Cetak Bukti
          </button>
          <button type="button" class="btn btn-primary" onclick="startNewService()">
            <i class="fa fa-plus"></i> Layanan Baru
          </button>
          <button type="button" class="btn btn-default" data-dismiss="modal">
            <i class="fa fa-close"></i> Tutup
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Template Modal -->
  <div class="modal fade" id="templateModal">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span></button>
          <h4 class="modal-title"><i class="fa fa-book"></i> Template Rekomendasi</h4>
        </div>
        <div class="modal-body">
          <div class="row">
            <div class="col-md-4">
              <div class="list-group" id="templateList">
                <a href="#" class="list-group-item active" onclick="selectTemplate('diabetes')">
                  <i class="fa fa-heartbeat"></i> Diabetes Mellitus
                </a>
                <a href="#" class="list-group-item" onclick="selectTemplate('hipertensi')">
                  <i class="fa fa-tint"></i> Hipertensi
                </a>
                <a href="#" class="list-group-item" onclick="selectTemplate('jantung')">
                  <i class="fa fa-heart"></i> Penyakit Jantung
                </a>
                <a href="#" class="list-group-item" onclick="selectTemplate('respiratory')">
                  <i class="fa fa-lungs"></i> Gangguan Pernapasan
                </a>
              </div>
            </div>
            <div class="col-md-8">
              <div id="templateContent">
                <h4>Template Diabetes Mellitus</h4>
                <div class="well">
                  <strong>Diagnosis:</strong> Diabetes Mellitus Tipe 2<br>
                  <strong>Rekomendasi:</strong><br>
                  - Kontrol gula darah rutin<br>
                  - Diet rendah gula dan karbohidrat<br>
                  - Olahraga teratur 30 menit/hari<br>
                  - Minum obat sesuai anjuran dokter<br>
                  <strong>Follow-up:</strong> 2 minggu
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" onclick="applyTemplate()">
            <i class="fa fa-check"></i> Gunakan Template
          </button>
          <button type="button" class="btn btn-default" data-dismiss="modal">
            <i class="fa fa-close"></i> Batal
          </button>
        </div>
      </div>
    </div>
  </div>

</section>

<script>
// Global variables
let currentStep = 0;
let selectedPatientData = null;
let assessmentData = null;

// Initialize
$(document).ready(function() {
  updateStats();
  initializeEventListeners();
});

function updateStats() {
  // Simulate real-time stats update
  setInterval(() => {
    $('#totalRekomendasi').text(Math.floor(Math.random() * 50) + 140);
    $('#rekomendasisHariIni').text(Math.floor(Math.random() * 10) + 20);
  }, 30000);
}

function initializeEventListeners() {
  // Patient search with debounce
  let searchTimeout;
  $('#patientSearch').on('input', function() {
    clearTimeout(searchTimeout);
    searchTimeout = setTimeout(() => {
      if ($(this).val().length >= 3) {
        searchPatient();
      }
    }, 300);
  });
  
  // Schedule radio buttons
  $('input[name="schedule"]').change(function() {
    if ($(this).val() === 'later') {
      $('#scheduleTime').show();
    } else {
      $('#scheduleTime').hide();
    }
  });
}

function startFlow() {
  document.getElementById('initialState').style.display = 'none';
  document.getElementById('flowContainer').style.display = 'block';
  document.getElementById('step1').style.display = 'block';
  
  updateProgress(25);
  updateCurrentStep('Pilih Pasien');
  
  // Focus on patient search
  setTimeout(() => {
    document.getElementById('patientSearch').focus();
  }, 500);
}

function updateProgress(percentage) {
  $('#progressBar').css('width', percentage + '%');
}

function updateCurrentStep(stepName) {
  $('#currentStep').text(stepName);
}

function searchPatient() {
  const query = document.getElementById('patientSearch').value;
  
  if (query.length < 3) return;
  
  // Simulate API call
  setTimeout(() => {
    const mockData = [
      {
        id: 1,
        nama: 'Ahmad Susanto',
        rm: 'RM001234',
        umur: 45,
        gender: 'Laki-laki',
        alamat: 'Jl. Merdeka No.
      </div><!-- /.content-wrapper -->
       
      <!-- Konten Selesai -->

      <!-- footer -->
     <footer class="main-footer ">
        <div class="pull-right hidden-xs">
          <i class="fa fa-calendar"></i> 07 Agustus 2025  &nbsp; <span id="waktu">12:09:07</span>   &nbsp;<i class="fa fa-desktop"></i> Alamat Server : <input style="width:150px" readonly value="#">
        <div id="session" ></div>
    </div>
    <b>Manajemen Apotek 1.0</b> Copyright &copy; <a href="https://hosterweb.id/">Hosterweb Grup CV. Rizky Jaya Indosoft</a></footer>
 
</div>
      <!-- footer -->
      <script>
      function tampilkanWaktu() {
        const waktuSekarang = new Date();
        let jam = waktuSekarang.getHours();
        let menit = waktuSekarang.getMinutes();
        let detik = waktuSekarang.getSeconds();

        // Tambahkan angka 0 di depan jika jam, menit, atau detik < 10
        jam = jam < 10 ? "0" + jam : jam;
        menit = menit < 10 ? "0" + menit : menit;
        detik = detik < 10 ? "0" + detik : detik;

        document.getElementById("waktu").innerHTML = jam + ":" + menit + ":" + detik;
      }

      // Panggil fungsi sekali saat halaman dimuat
      tampilkanWaktu();

      // Perbarui waktu setiap 1 detik (1000 milidetik)
      setInterval(tampilkanWaktu, 1000);
    </script>

     <!-- jQuery 2.1.4 -->
    <script src="../plugins/jQuery/jQuery-2.1.4.min.js"></script>
    <!-- jQuery UI 1.11.4 -->
    <script src="https://code.jquery.com/ui/1.11.4/jquery-ui.min.js"></script>
    <!-- Resolve conflict in jQuery UI tooltip with Bootstrap tooltip -->
    <script>
      $.widget.bridge('uibutton', $.ui.button);
    </script>
    <!-- Bootstrap 3.3.5 -->
    <script src="../bootstrap/js/bootstrap.min.js"></script>
    <!-- Morris.js charts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script>
    <script src="../plugins/morris/morris.min.js"></script>
    <!-- Sparkline -->
    <script src="../plugins/sparkline/jquery.sparkline.min.js"></script>
    <!-- jvectormap -->
    <script src="../plugins/jvectormap/jquery-jvectormap-1.2.2.min.js"></script>
    <script src="../plugins/jvectormap/jquery-jvectormap-world-mill-en.js"></script>
    <!-- jQuery Knob Chart -->
    <script src="../plugins/knob/jquery.knob.js"></script>
    <!-- daterangepicker -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.10.2/moment.min.js"></script>
    <script src="../plugins/daterangepicker/daterangepicker.js"></script>
    <!-- datepicker -->
    <script src="../plugins/datepicker/bootstrap-datepicker.js"></script>
    <!-- Bootstrap WYSIHTML5 -->
    <script src="../plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.all.min.js"></script>
    <!-- Slimscroll -->
    <script src="../plugins/slimScroll/jquery.slimscroll.min.js"></script>
    <!-- FastClick -->
    <script src="../plugins/fastclick/fastclick.min.js"></script>
    <!-- AdminLTE App -->
    <script src="../dist/js/app.min.js"></script>
    <!-- AdminLTE dashboard demo (This is only for demo purposes) -->
    <script src="../dist/js/pages/dashboard.js"></script>
    <!-- AdminLTE for demo purposes -->
    <script src="../dist/js/demo.js"></script>     

    </div>
  </body>
</html>
